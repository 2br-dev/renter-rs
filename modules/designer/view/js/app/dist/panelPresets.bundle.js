(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{404:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-presets-list"},[s("a",{staticClass:"d-preset-category d-back",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.closeLastPanel()}}},[s("span",{staticClass:"name"},[t._v(t._s(t.data.category.title))])]),t._v(" "),Object.keys(t.presets).length?t._l(t.presets,(function(e,a){return s("div",{key:a,staticClass:"d-preset-item",on:{click:function(s){return s.preventDefault(),s.stopPropagation(),a=s,t.setPreset(a,t.data.blockId,e);var a}}},[t.isCanEdit()?s("span",{staticClass:"d-delete",on:{click:function(s){return s.preventDefault(),s.stopPropagation(),t.delPreset(e)}}}):t._e(),t._v(" "),t.isLocked(e)?s("div",{staticClass:"d-locked",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showLockedError()}}},[s("div",{staticClass:"d-locked-lock"}),t._v(" "),s("div",{staticClass:"d-locked-text"},[t._v(t._s(t.lang("Отсутствует Pro подписка")))])]):t._e(),t._v(" "),e.image&&e.image.length?s("div",{staticClass:"d-image"},[s("img",{attrs:{src:e.image,alt:e.title}})]):t._e(),t._v(" "),e.title&&e.title.length?s("div",{staticClass:"d-title"},[t._v("\n                "+t._s(e.title)+"\n            ")]):t._e(),t._v(" "),e.description&&e.description.length?s("div",{staticClass:"d-description"},[t._v("\n                "+t._s(e.description)+"\n            ")]):t._e()])})):t._e(),t._v(" "),t.presets.length?t._e():[s("div",{staticClass:"d-list-empty"},[t._v("\n            "+t._s(t.lang("Список пресетов пуст"))+"\n        ")])]],2)};a._withStripped=!0;var i=s(7),l=s(1),o=s(51),c={data:()=>({presets:[]}),mounted(){this.presets=this.getCategoryPresets()},methods:{isCanEdit:()=>!!window.global.designer_admin,getCategoryPresets(){let t=this.data.category.id;return this.getPresetByCategory(t)},isLocked:t=>!(!t.paid||"1"!==t.paid||l.b.checkProSubscribe()),showLockedError(){o.a.showError(lang.t('Отсутствует Pro подписка. <a href="https://readyscript.ru/drag-drop-constructor/" target="_blank">Как её получить?</a>'))},async setPreset(t,e,s){!this.isCanEdit()&&this.isLocked(s)||(t.target.closest(".d-preset-item").classList.add("d-loading"),await this.deleteBlock(e),this.setPresetToBlock({block_id:e,preset:s}).then(t=>{l.b.toggleModuleButtons(e),l.b.closeAllPanels(),t.no_commit=1,this.setBlockDataFromPreset({block_id:e.toString(),childs:t}).then(t=>{let s=t.data;s.row=l.b.prepareBlocksData(s.row),this.setBlockData({block_id:e.toString(),childs:s});let a=new CustomEvent("designer.block-update-all",{detail:{block_id:e}});document.dispatchEvent(a),setTimeout(()=>{this.setBlockMaxWidth(e),setDesignerBackgroundWidths()},200)})}))},setBlockMaxWidth(t){let e=this.getBlockData(t);if(e.childs.row.background_fullwidth){let s=document.querySelector("#d-row-"+t).closest(".designer-block");e.childs.row.css["max-width"].value.length&&"px"!=e.childs.row.css["max-width"].value?e.childs.row.css["max-width"].value=s.getBoundingClientRect().width+"px":e.childs.row.css["max-width"].value=""}else e.childs.row.css["max-width"].value="";this.setBlockData({block_id:t,childs:e.childs})},delPreset(t){confirm(lang.t("Удалить пресет?"))&&this.deletePreset(t.alias)},...Object(i.b)(["closeLastPanel"]),...Object(i.b)("atoms",["deletePreset"]),...Object(i.b)("blocks",["deleteBlock","setPresetToBlock","setBlockData","setBlockDataWithoutRequest","setBlockDataFromPreset"])},computed:{...Object(i.c)("atoms",["getPresetByCategory"]),...Object(i.c)("blocks",["getBlockData"])}},r={props:{data:{type:Object,required:!0}},mixins:[c]},d=s(98),n=Object(d.a)(r,a,[],!1,null,null,null);n.options.__file="-readyscript/modules/designer/view/js/app/src/components/leftpanel/panels/panelpresets/panelpresets.vue";e.default=n.exports}}]);