(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{365:function(t,e,i){"use strict";var s=i(7),a=i(1);e.a={data:()=>({tinymceOptions:{height:200,theme:"modern",plugins:["link image lists anchor","searchreplace wordcount visualblocks visualchars code fullscreen media","save table contextmenu paste textcolor"],menubar:"file edit view",toolbar:"insertfile undo redo | styleselect | bold italic underline | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media fullpage | forecolor backcolor emoticons",language:"ru"},tinymceInlineOptions:{toolbar_items_size:"small",language:"ru",menubar:!1,inline:!0,plugins:"link textcolor",toolbar:"bold italic underline strikethrough",valid_elements:"*",valid_styles:{"*":"font-size,font-family,color,text-decoration,text-align"},extended_valid_elements:"*[*]",cleanup:!1,verify_html:!1,powerpaste_word_import:"clean",powerpaste_html_import:"clean",content_css:[]}}),methods:{getItemValue(t,e,i=null){let s=this.getItem();if(i){if(s.childs[i][t]&&s.childs[i][t][e])return s.childs[i][t][e].value;console.error(lang.t(`No property "${e}" in SUB CHILD item[${t}]`),s.childs[i][t])}else{if(s[t]&&s[t][e])return s[t][e].value;console.error(lang.t(`No property "${e}" in item[${t}]`),s[t])}return""},getItem(){switch(this.itemType){case a.a.atom:return this.getAtomData(this.blockId,this.itemId);case a.a.column:return this.getColumnData(this.blockId,this.itemId);case a.a.row:return this.getRowData(this.blockId,this.itemId);default:throw new Error(lang.t("Нет метода для получения данных. Тип: %0",[this.itemType]))}},getItemOptions(){return this.getItem()[this.keyName][this.item.name].data.options},setItemData(t){switch(this.itemType){case a.a.atom:this.setAtomData(t);break;case a.a.column:this.setColumnData(t);break;case a.a.row:this.setRowData(t);break;default:throw new Error(lang.t("Нет метода для получения данных. Тип: %0",[this.itemType]))}},setAtomKeyValue(t){let e=this.getItem();e[this.item.name]=t,this.setItemData(e);let i=new CustomEvent("designer.redraw-atom."+e.id,{detail:{id:e.id,value:t}});document.dispatchEvent(i),setTimeout(()=>{this.checkIfNeedSendEventAfterEdit(e)},500)},addStyleIfNeeded(t,e){"css"==this.keyName&&("background-image"==t&&e.trim().length&&(e="url('"+e+"')"),this.addStyleParameter(t,e))},checkIfNeedSendEventAfterEdit(t){if(t[this.keyName][this.item.name].debug_event){let e=new CustomEvent(t[this.keyName][this.item.name].debug_event,{detail:{id:this.itemId}});document.dispatchEvent(e)}},sendDataValueFromEvent(t){let e=t.target.value;"background-image"==this.item.name&&(e=e.replaceAll(" ","%20"));let i=this.getItem();"css"==this.keyName&&this.itemChildId?i.childs[this.itemChildId][this.keyName][this.item.name].value=e:(i[this.keyName][this.item.name].value=e,this.checkIfNeedSendEventAfterEdit(i)),this.setItemData(i)},sendDataValue(t){let e=this.getItem();"background-image"==this.item.name&&(t=t.replaceAll(" ","%20")),"css"==this.keyName&&this.itemChildId?e.childs[this.itemChildId][this.keyName][this.item.name].value=t:(e[this.keyName][this.item.name].value=t,this.checkIfNeedSendEventAfterEdit(e)),this.setItemData(e)},clear(){this.sendDataValue(""),this.isHoverable&&this.sendDataHoverValue("")},getStyleLikeObject(){let t=this.getItem();return a.b.convertInlineStyleToObject(t.attrs.style.value)},addStyleParameter(t,e){let i=this.getStyleLikeObject();"string"==typeof e?0==(e=e.trim()).length?delete i[t]:i[t]=e:"object"==typeof e&&(i[t]=e);let s=this.getItem();s.attrs.style.value=a.b.convertStyleObjectToString(i),this.setItemData(s)},...Object(s.b)("blocks",["setAtomData","setRowData","setColumnData"])},computed:{itemValue(){return this.getItemValue(this.keyName,this.item.name,this.itemChildId)},itemHoverValue(){return this.getItemHoverValue(this.keyName,this.item.name,this.itemChildId)},...Object(s.c)("blocks",["getAtomData","getColumnData","getRowData"])}}},418:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.isHaveAttrGroups()?[i("div",{staticClass:"d-menu-css-preset-wrapper"},[t._l(t.data.attr_groups,(function(e,s){return[t.isHaveAttrsForGroup(s)?i("div",{staticClass:"d-menu-css-preset"},[i("div",{staticClass:"d-menu-css-preset-title",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),i=e,void t.toggleGroup(i,s);var i}}},[i("span",[t._v(t._s(s))]),t._v(" "),i("a",{staticClass:"d-toggle"})]),t._v(" "),t.groupIsOpen(s)?i("div",{staticClass:"d-menu-css-preset-body"},["Элемент"==s&&t.isHaveVisibleHtml()?[i("div",{staticClass:"d-menu-control"},[i("div",{staticClass:"d-menu-control-title"},[t._v("\n                                    "+t._s(t.lang("Контент"))+"\n                                ")]),t._v(" "),i("div",{staticClass:"d-menu-control-body"},[i("input",{attrs:{type:"text"},domProps:{value:t.data.html},on:{input:t.sendHtmlContent}})])])]:t._e(),t._v(" "),i("ControlCollection",t._b({attrs:{"key-name":"attrs",list:t.attrsForGroup(s)}},"ControlCollection",t.$props,!1))],2):t._e()]):t._e()]}))],2)]:[t.isHaveVisibleHtml()?i("div",{staticClass:"d-menu-control"},[i("div",{staticClass:"d-menu-control-title"},[t._v("\n                "+t._s(t.lang("Контент"))+"\n            ")]),t._v(" "),i("input",{attrs:{type:"text"},domProps:{value:t.data.html},on:{input:t.sendHtmlContent}})]):t._e(),t._v(" "),i("ControlCollection",{attrs:{"key-name":"attrs","block-id":t.blockId,"item-type":t.itemType,"item-id":t.itemId,list:t.getAttrs()}})]],2)};s._withStripped=!0;var a={data:()=>({data:{},openedGroups:[]}),created(){this.data=this.getItem()},methods:{isHaveAttrGroups(){return Object.keys(this.data.attr_groups).length>1},isHaveAttrsForGroup(t){if(this.isHaveVisibleHtml())return!0;let e=this.attrsForGroup(t),i=!1;return Object.keys(e).forEach(t=>{e[t].visible&&(i=!0)}),i},isHaveVisibleHtml(){return this.data.html_visible},sendHtmlContent(t){let e=this.data;e.html=t.target.value,this.setAtomData(e)},getAttrs(){return this.data.attrs},attrsForGroup(t){let e={};return Object.keys(this.data.attr_groups[t]).forEach(i=>{let s=this.data.attr_groups[t][i];e[s]=this.data.attrs[s]}),e},groupIsOpen(t){return-1!=this.openedGroups.indexOf(t)},toggleGroup(t,e){let i;-1!=(i=this.openedGroups.indexOf(e))?this.openedGroups.splice(i,1):this.openedGroups.push(e),this.$forceUpdate();let s=t.target.closest(".d-menu-css-preset");s&&s.classList.toggle("d-open")}}},l={name:"AttrsTab",mixins:[i(365).a,a],props:{blockId:{type:[String,Number],required:!0},itemType:{type:String,required:!0},itemId:{type:String,required:!0}},components:{ControlCollection:()=>i.e(8).then(i.bind(null,449))}},r=i(98),n=Object(r.a)(l,s,[],!1,null,null,null);n.options.__file="-readyscript/modules/designer/view/js/app/src/components/leftpanel/panels/tabs/attrstab/attrstab.vue";e.default=n.exports}}]);