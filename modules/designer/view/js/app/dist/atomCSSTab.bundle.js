(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{365:function(e,t,s){"use strict";var i=s(7),a=s(1);t.a={data:()=>({tinymceOptions:{height:200,theme:"modern",plugins:["link image lists anchor","searchreplace wordcount visualblocks visualchars code fullscreen media","save table contextmenu paste textcolor"],menubar:"file edit view",toolbar:"insertfile undo redo | styleselect | bold italic underline | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media fullpage | forecolor backcolor emoticons",language:"ru"},tinymceInlineOptions:{toolbar_items_size:"small",language:"ru",menubar:!1,inline:!0,plugins:"link textcolor",toolbar:"bold italic underline strikethrough",valid_elements:"*",valid_styles:{"*":"font-size,font-family,color,text-decoration,text-align"},extended_valid_elements:"*[*]",cleanup:!1,verify_html:!1,powerpaste_word_import:"clean",powerpaste_html_import:"clean",content_css:[]}}),methods:{getItemValue(e,t,s=null){let i=this.getItem();if(s){if(i.childs[s][e]&&i.childs[s][e][t])return i.childs[s][e][t].value;console.error(lang.t(`No property "${t}" in SUB CHILD item[${e}]`),i.childs[s][e])}else{if(i[e]&&i[e][t])return i[e][t].value;console.error(lang.t(`No property "${t}" in item[${e}]`),i[e])}return""},getItem(){switch(this.itemType){case a.a.atom:return this.getAtomData(this.blockId,this.itemId);case a.a.column:return this.getColumnData(this.blockId,this.itemId);case a.a.row:return this.getRowData(this.blockId,this.itemId);default:throw new Error(lang.t("Нет метода для получения данных. Тип: %0",[this.itemType]))}},getItemOptions(){return this.getItem()[this.keyName][this.item.name].data.options},setItemData(e){switch(this.itemType){case a.a.atom:this.setAtomData(e);break;case a.a.column:this.setColumnData(e);break;case a.a.row:this.setRowData(e);break;default:throw new Error(lang.t("Нет метода для получения данных. Тип: %0",[this.itemType]))}},setAtomKeyValue(e){let t=this.getItem();t[this.item.name]=e,this.setItemData(t);let s=new CustomEvent("designer.redraw-atom."+t.id,{detail:{id:t.id,value:e}});document.dispatchEvent(s),setTimeout(()=>{this.checkIfNeedSendEventAfterEdit(t)},500)},addStyleIfNeeded(e,t){"css"==this.keyName&&("background-image"==e&&t.trim().length&&(t="url('"+t+"')"),this.addStyleParameter(e,t))},checkIfNeedSendEventAfterEdit(e){if(e[this.keyName][this.item.name].debug_event){let t=new CustomEvent(e[this.keyName][this.item.name].debug_event,{detail:{id:this.itemId}});document.dispatchEvent(t)}},sendDataValueFromEvent(e){let t=e.target.value;"background-image"==this.item.name&&(t=t.replaceAll(" ","%20"));let s=this.getItem();"css"==this.keyName&&this.itemChildId?s.childs[this.itemChildId][this.keyName][this.item.name].value=t:(s[this.keyName][this.item.name].value=t,this.checkIfNeedSendEventAfterEdit(s)),this.setItemData(s)},sendDataValue(e){let t=this.getItem();"background-image"==this.item.name&&(e=e.replaceAll(" ","%20")),"css"==this.keyName&&this.itemChildId?t.childs[this.itemChildId][this.keyName][this.item.name].value=e:(t[this.keyName][this.item.name].value=e,this.checkIfNeedSendEventAfterEdit(t)),this.setItemData(t)},clear(){this.sendDataValue(""),this.isHoverable&&this.sendDataHoverValue("")},getStyleLikeObject(){let e=this.getItem();return a.b.convertInlineStyleToObject(e.attrs.style.value)},addStyleParameter(e,t){let s=this.getStyleLikeObject();"string"==typeof t?0==(t=t.trim()).length?delete s[e]:s[e]=t:"object"==typeof t&&(s[e]=t);let i=this.getItem();i.attrs.style.value=a.b.convertStyleObjectToString(s),this.setItemData(i)},...Object(i.b)("blocks",["setAtomData","setRowData","setColumnData"])},computed:{itemValue(){return this.getItemValue(this.keyName,this.item.name,this.itemChildId)},itemHoverValue(){return this.getItemHoverValue(this.keyName,this.item.name,this.itemChildId)},...Object(i.c)("blocks",["getAtomData","getColumnData","getRowData"])}}},415:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isHavePresets()?s("div",{staticClass:"d-menu-css-preset-wrapper"},[e.data.css_title?s("div",{staticClass:"d-menu-css-subpreset-title d-first"},[e._v("\n            "+e._s(e.data.css_title)+"\n        ")]):e._e(),e._v(" "),e._l(e.data.presets,(function(t,i){return[s("div",{staticClass:"d-menu-css-preset"},[s("div",{staticClass:"d-menu-css-preset-title",on:{click:function(s){return s.preventDefault(),s.stopPropagation(),i=s,void e.togglePreset(i,t,"original_element");var i}}},[s("span",[e._v(e._s(t.title))]),e._v(" "),s("a",{staticClass:"d-toggle"})]),e._v(" "),e.presetIsOpen(t,"original_element")?s("div",{staticClass:"d-menu-css-preset-body"},[s("ControlCollection",e._b({attrs:{"key-name":"css",list:e.cssForPreset(t)}},"ControlCollection",e.$props,!1))],1):e._e()])]}))],2):e._e(),e._v(" "),s("ControlCollection",e._b({attrs:{"key-name":"css",list:e.cssNotInPreset}},"ControlCollection",e.$props,!1)),e._v(" "),e.isAtomHaveChildren()?s("div",{staticClass:"d-menu-css-preset-wrapper d-sub-preset"},e._l(e.data.childs,(function(t,i){return s("div",{key:i,staticClass:"d-menu-css-subpreset"},[t.presets?[s("div",{staticClass:"d-menu-css-subpreset-title"},[e._v("\n                    "+e._s(t.title)+"\n                ")]),e._v(" "),e._l(t.presets,(function(t,a){return[s("div",{staticClass:"d-menu-css-preset"},[s("div",{staticClass:"d-menu-css-preset-title",on:{click:function(s){return s.preventDefault(),s.stopPropagation(),a=s,void e.togglePreset(a,t,i);var a}}},[s("span",[e._v(e._s(t.title))]),e._v(" "),s("a",{staticClass:"d-toggle"})]),e._v(" "),e.presetIsOpen(t,i)?s("div",{staticClass:"d-menu-css-preset-body"},[s("ControlCollection",e._b({attrs:{"key-name":"css","item-child-id":i,list:e.cssForPreset(t,i)}},"ControlCollection",e.$props,!1))],1):e._e()])]}))]:e._e()],2)})),0):e._e()],1)};i._withStripped=!0;var a=s(365),l=s(7),n={data:()=>({data:{},openedPresets:{}}),created(){this.data=this.getItem()},computed:{cssNotInPreset(){let e=this.data.presets,t=Object.keys(this.data.css),s={};if(e)for(let i=0;i<t.length;i++){let a=t[i],l=!0;for(let t in e){let s=e[t];s.css&&s.css.length&&s.css.includes(a)&&(l=!1)}l&&(s[a]=this.data.css[a])}return s}},methods:{cssForPreset(e,t=null){let s={};return Object.keys(e.css).forEach(i=>{let a=e.css[i];s[a]=t?this.data.childs[t].css[a]:this.data.css[a]}),s},presetIsOpen(e,t){return this.openedPresets.hasOwnProperty(t)||(this.openedPresets[t]=[]),-1!=this.openedPresets[t].indexOf(e.title)},isAtomHaveChildren(){return"atom"==this.itemType&&this.data.childs},isHavePresets(){return this.data.presets&&this.data.presets.length>0},togglePreset(e,t,s){let i;-1!=(i=this.openedPresets[s].indexOf(t.title))?this.openedPresets[s].splice(i,1):this.openedPresets[s].push(t.title),this.$forceUpdate();let a=e.target.closest(".d-menu-css-preset");a&&a.classList.toggle("d-open")},...Object(l.b)("blocks",["setAtomData"])}},r={name:"CSSTab",mixins:[a.a,n],props:{blockId:{type:[String,Number],required:!0},itemType:{type:String,required:!0},itemId:{type:String,required:!0}},components:{ControlCollection:()=>s.e(8).then(s.bind(null,449))}},o=s(98),c=Object(o.a)(r,i,[],!1,null,null,null);c.options.__file="-readyscript/modules/designer/view/js/app/src/components/leftpanel/panels/tabs/csstab/csstab.vue";t.default=c.exports}}]);